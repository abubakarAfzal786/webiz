{"version":3,"sources":["01_hold scroll.js","02_sliders.js","03_common.js","04_upload.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../common.js","sourcesContent":["function hold_all_scroll_page(fix = false) {\r\n    if (fix) {\r\n        window.addEventListener('wheel', holdScroll, { passive: false });\r\n        window.addEventListener('DOMMouseScroll', holdScroll, { passive: false });\r\n        document.addEventListener('touchmove', holdScroll, { passive: false });\r\n    } else {\r\n        window.removeEventListener('wheel', holdScroll, { passive: false });\r\n        window.removeEventListener('DOMMouseScroll', holdScroll, { passive: false });\r\n        document.removeEventListener('touchmove', holdScroll, { passive: false });\r\n    }\r\n}\r\n\r\nfunction holdScroll(e) {\r\n    e = e || window.event;\r\n    if (e.preventDefault)\r\n        e.preventDefault();\r\n    e.returnValue = false;\r\n    return false;\r\n}\r\n\r\n\r\nfunction hold_scroll_page(fix = false) {\r\n    if (fix) {\r\n        window.addEventListener('wheel', preventDefault, { passive: false });\r\n        window.addEventListener('DOMMouseScroll', preventDefault, { passive: false });\r\n        document.addEventListener('touchmove', preventDefault, { passive: false });\r\n        // $(document).on(\"touchmove\", preventDefault)\r\n    } else {\r\n        window.removeEventListener('wheel', preventDefault, { passive: false });\r\n        window.removeEventListener('DOMMouseScroll', preventDefault, { passive: false });\r\n        document.removeEventListener('touchmove', preventDefault, { passive: false });\r\n    }\r\n}\r\nvar ts;\r\n$(document).on('touchstart', function (e) {\r\n    ts = e.originalEvent.touches[0].clientY;\r\n});\r\n\r\nfunction preventDefault(e) {\r\n    e = e || window.event;\r\n    var area;\r\n    if ($(e.target).closest(\".modal-wrap .scroll-wrap\").length) {\r\n        area = $(e.target).closest(\".modal-wrap .scroll-wrap\");\r\n    } else if ($(e.target).closest(\".iziModal\").length) {\r\n        area = $(e.target).closest(\".iziModal-wrap\");\r\n    } else {\r\n        area = $(e.target);\r\n    }\r\n    var parentPopup = $(e.target).closest(\".modal-wrap .scroll-wrap, .iziModal\").length || $(e.target).hasClass('.popupContent');\r\n    if (!parentPopup) {\r\n        e.preventDefault();\r\n        e.returnValue = false;\r\n        return false;\r\n    }\r\n    /*if ($(e.target).closest(\".chosen-container\").length) {\r\n        e.preventDefault();\r\n        e.returnValue = false;\r\n        return false;\r\n    }*/\r\n    var delta = e.deltaY || e.detail || e.wheelDelta;\r\n    if (e.type == \"touchmove\") {\r\n        var tob = e.changedTouches[0], // reference first touch point for this event\r\n         offset = parseInt(tob.clientY);\r\n        if (ts < offset - 5) {\r\n            delta = -100;\r\n        } else if (ts > offset + 5) {\r\n            delta = 100;\r\n        }\r\n    }\r\n    if (delta <= 0 && area[0].scrollTop <= 0) {\r\n        e.preventDefault();\r\n    }\r\n    if (delta > 0 && area[0].scrollHeight - area[0].clientHeight - area[0].scrollTop <= 1) {\r\n        e.preventDefault();\r\n    }\r\n}","const reviewsMass = [];\r\n\r\nlet reviewsSlider;\r\n\r\n$(document).ready(function () {\r\n    $('.reviews-slider .swiper-container').each(function (index, element) {\r\n        let $this = $(this);\r\n        reviewsSlider = new Swiper($this, {\r\n            slidesPerView: 1,\r\n            spaceBetween: 10,\r\n            grabCursor: true,\r\n            loop: true,\r\n            loopAdditionalSlides: 1,\r\n            mousewheelControl: true,\r\n            watchSlidesVisibility: true,\r\n            lazyLoading: true,\r\n            lazy: {\r\n                preloadImages: true,\r\n                loadPrevNext: true,\r\n                loadPrevNextAmount: 1,\r\n                elementClass: 'lazy',\r\n            },\r\n            navigation: {\r\n                nextEl: $this.closest('.reviews-slider').find('.next-slide span')[0],\r\n                prevEl: $this.closest('.reviews-slider').find('.prev-slide span')[0],\r\n                disabledClass: 'disabled'\r\n            }\r\n        });\r\n        reviewsMass.push(reviewsSlider);\r\n\r\n    });\r\n\r\n});","function hasLodash(str) {\r\n    str = str || '';\r\n    return !!str.match(/\\_/);\r\n}\r\n\r\nfunction inputEffect(elem) {\r\n    /*placeholder-effect*/\r\n    // elem.val(\"\");\r\n    if (!elem.val().length == 0) {\r\n        elem.addClass(\"has-content\");\r\n    }\r\n\r\n    elem.focusout(function () {\r\n        // if ($(this).attr(\"type\") == \"tel\" && $(this).val()[$(this).val().length - 1] == \"_\") {\r\n        if (elem.attr(\"type\") == \"tel\" && hasLodash($(this).val())) {\r\n            elem.val(\"\");\r\n        }\r\n        if (elem.val() != \"\") {\r\n            elem.addClass(\"has-content\");\r\n        } else {\r\n            elem.removeClass(\"has-content\");\r\n        }\r\n    });\r\n\r\n    elem.keyup(function () {\r\n        if (elem.parent().hasClass(\"error\")) {\r\n            elem.parent().removeClass(\"error\")\r\n        }\r\n    });\r\n    /*placeholder-effect*/\r\n}\r\n\r\nfunction tableMobData() {\r\n    $(\".responsive-table table\").each(function () {\r\n        // const th = $(this).find('thead th').slice(1);\r\n\r\n        const th = $(this).find('thead td');\r\n\r\n        // const title = $(this).find('thead th').first().text();\r\n        $(this).find('tbody tr').each(function () {\r\n            const td = $(this).find(\"td\");\r\n            // const td = $(this).find(\"td\").slice(1);\r\n            td.each(function (index) {\r\n                // $(this).attr(\"data-label\", `${title} ${th.eq(index).text()}`)\r\n                $(this).attr(\"data-label\", `${th.eq(index).text()}`)\r\n            });\r\n        });\r\n    });\r\n}\r\n\r\n$(document).ready(function () {\r\n\r\n    $(\"input[type=tel]\").mask(\"(999) 999-9999\");\r\n\r\n    $('[data-fancybox]').fancybox({\r\n        closeExisting: true,\r\n        buttons: ['close'],\r\n        afterShow: function () {\r\n            hold_scroll_page(true);\r\n        },\r\n        afterClose: function () {\r\n            hold_scroll_page(false);\r\n        }\r\n    });\r\n\r\n    if ($(\".responsive-table table\").length) {\r\n        tableMobData();\r\n    }\r\n\r\n    $(document).on('click', '.open-chat-list button', function () {\r\n        $('.chat-list-wrap').addClass('open')\r\n    });\r\n\r\n    $(document).on('click', '.close-chat-list button', function () {\r\n        $('.chat-list-wrap').removeClass('open')\r\n    });\r\n\r\n    $(document).on('click', '.toolbar-menu .open-menu button', function () {\r\n        $('.page-menu .menu-list').addClass('open')\r\n    });\r\n\r\n    $(document).on('click', '.page-menu .menu-list .close-list button', function () {\r\n        $('.page-menu .menu-list').removeClass('open')\r\n    });\r\n\r\n    $(document).on('click', function (e) {\r\n        if (!$(e.target).closest('.page-menu .menu-list, .toolbar-menu .open-menu').length && $('.page-menu .menu-list').hasClass('open')) {\r\n            $('.page-menu .menu-list').removeClass('open')\r\n        }\r\n        e.stopPropagation();\r\n    });\r\n\r\n    $(document).on('click', '.set-rating p span.icon-empty', function (e) {\r\n        $(this).addClass('active').siblings().removeClass('active');\r\n    });\r\n\r\n    $(\"input.placeholder-effect, textarea.placeholder-effect\").each(function () {\r\n        let input = $(this);\r\n        inputEffect(input);\r\n    });\r\n    $(\"select.placeholder-effect\").each(function () {\r\n        let select = $(this);\r\n\r\n        if (!select.find('option[hidden]').is(':selected')) {\r\n            select.addClass(\"has-content\");\r\n        }\r\n\r\n        select.change(function () {\r\n            if (select.find('option[hidden]').is(':selected')) {\r\n                select.removeClass(\"has-content\");\r\n\r\n            } else {\r\n                select.addClass(\"has-content\");\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '.tabs-menu ul li', function () {\r\n        if (!$(this).hasClass('open')) {\r\n            let tab = $(this).attr('data-index'),\r\n                showItem = $(this).closest('.tabs-wrap').find('.tabs-content[data-index=\"' + tab + '\"]');\r\n            $(this).addClass('open').siblings().removeClass('open');\r\n            showItem.addClass('open').siblings().removeClass('open');\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '.quantity-wrap a', function (e) {\r\n        e.preventDefault();\r\n        let newVal,\r\n            $button = $(this),\r\n            oldValue = $button.closest('.quantity-wrap').find('input').val();\r\n\r\n        if ($button.attr('data-act') == '+') {\r\n            newVal = parseInt(oldValue) + 1;\r\n        } else {\r\n            // Don't allow decrementing below zero\r\n            if (oldValue > 1) {\r\n                newVal = parseInt(oldValue - 1);\r\n            } else {\r\n                newVal = 1;\r\n            }\r\n        }\r\n        $button.closest('.quantity-wrap').find('input').val(newVal);\r\n    });\r\n\r\n    var move_access = false;\r\n    var scrollLeft;\r\n\r\n    $('.touch-scroll').on('mousedown touchstart', function (event) {\r\n        move_access = true;\r\n        if (event.type == 'touchstart') {\r\n            var touch = event.originalEvent.touches[0] || event.originalEvent.changedTouches[0];\r\n            var offset = touch.clientX;\r\n        } else {\r\n            //если нажата кнопка мышки:\r\n            var offset = event.clientX;\r\n        }\r\n        touchstart = offset;\r\n        scrollLeft = $(this).find('.scroll-wrap').scrollLeft();\r\n    });\r\n    $(document).on('mouseup touchend', function (event) {\r\n        move_access = false;\r\n        if (event.type == 'touchend') {\r\n            var touch = event.originalEvent.touches[0] || event.originalEvent.changedTouches[0];\r\n            var offset = touch.clientX;\r\n        } else {\r\n            //если нажата кнопка мышки:\r\n            var offset = event.clientX;\r\n        }\r\n        touchstart = offset;\r\n    });\r\n    $('.touch-scroll').on('mousemove touchmove', function (event) {\r\n        if (move_access) {\r\n            if (event.type == 'touchmove') {\r\n                var touch = event.originalEvent.touches[0] || event.originalEvent.changedTouches[0];\r\n                var offset = touch.clientX;\r\n            } else {\r\n                //если нажата кнопка мышки:\r\n                var offset = event.clientX;\r\n            }\r\n            $(this).find('.scroll-wrap').scrollLeft(scrollLeft + (touchstart - offset));\r\n            //отменяем 'всплытие сообщений', чтобы не вызывался клик на тач-устройствах.\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n        }\r\n    });\r\n\r\n});","const Upload = {\r\n    // Handle events it the box\r\n    init: function (upload) {\r\n        let input = upload.find('label.file input');\r\n        upload.on('drag dragstart dragend dragover dragenter dragleave drop', function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        })\r\n            .on('dragover dragenter', function () {\r\n                if (!upload.hasClass('is-dragover')) {\r\n                    upload.addClass('is-dragover');\r\n                }\r\n            })\r\n            .on('dragleave dragend drop', function () {\r\n                if (upload.hasClass('is-dragover')) {\r\n                    upload.removeClass('is-dragover');\r\n                }\r\n            })\r\n            .on('drop', function (e) {\r\n                files = e.originalEvent.dataTransfer.files;\r\n                Upload.submit(files, input);\r\n\r\n            });\r\n        input.change(function () {\r\n            Upload.submit(this.files, input);\r\n        });\r\n    },\r\n\r\n    // Check the uploaded file\r\n    submit: function (files, item) {\r\n        // Check file extension and size\r\n        for (let i = 0; i < files.length; i++) {\r\n            let file = files[i];\r\n            let type = file['type'].substr(0, file['type'].indexOf('/'));\r\n            if (type != 'image') {\r\n                alert('This file type is not supported. Only images should be uploaded');\r\n                return;\r\n            }\r\n            if (file['size'] > 10485760) {\r\n                alert('This file is too heavy, it weights more than 10M');\r\n                return;\r\n            }\r\n            Upload.display(file, item);\r\n        }\r\n    },\r\n\r\n    // Display an uploaded file\r\n    display: function (file, item) {\r\n        let img = item.closest('.upload-item').find('.ready-photo img');\r\n        let reader = new FileReader();\r\n        reader.onloadend = function () {\r\n            let parent = item.closest('.upload-item');\r\n            parent.find('.upload-wrap').hide();\r\n            parent.find('.preview-wrap').show();\r\n            // parent.find('.ready-photo img').attr('src', reader.result);\r\n            let preview = $('<div class=\"ready-photo\"><span class=\"icon-close\"></span><img src=\"' + reader.result + '\" alt=\"\"></div>');\r\n            preview.insertBefore(parent.find('.photo-wrap .add-extra'));\r\n        };\r\n        reader.readAsDataURL(file);\r\n    },\r\n};\r\n\r\nfunction uploadInit() {\r\n    $('.upload-wrap .upload:not(\".init\")').each(function () {\r\n        $(this).addClass('init');\r\n        Upload.init($(this));\r\n    });\r\n}\r\n\r\n$(document).ready(function () {\r\n    uploadInit();\r\n\r\n    $(document).on('change', '.upload-wrap .upload label.camera input', function () {\r\n        Upload.submit(this.files, $(this));\r\n    });\r\n\r\n\r\n    $(document).on('click', '.ready-photo span.icon-close', function () {\r\n        let parent = $(this).closest('.upload-item'),\r\n            currentItem = $(this).closest('.ready-photo'),\r\n            input = parent.find('.upload-wrap .upload label input');\r\n        if ($(this).closest('.preview-wrap').find('.ready-photo').length === 1) {\r\n            parent.find('.upload-wrap').show();\r\n            parent.find('.preview-wrap').hide();\r\n        }\r\n        $(this).closest('.upload-item').find('.photo-wrap .ready-photo').eq(currentItem.index()).remove();\r\n        // input.val(null);\r\n\r\n    });\r\n\r\n    $(document).on('click', '.preview-wrap .add-extra button', function () {\r\n        $(this).closest('.upload-item').find('.upload-wrap label.file').click();\r\n    });\r\n\r\n});"]}